# frozen_string_literal: true

module ModernTreasury
  module Models
    # @see ModernTreasury::Resources::BulkResults#retrieve
    class BulkResult < ModernTreasury::Internal::Type::BaseModel
      # @!attribute id
      #
      #   @return [String]
      required :id, String

      # @!attribute created_at
      #
      #   @return [Time]
      required :created_at, Time

      # @!attribute entity
      #   An object with type as indicated by `entity_type`. This is the result object
      #   that is generated by performing the requested action on the provided input
      #   `request_params`.
      #
      #   @return [ModernTreasury::Models::PaymentOrder, ModernTreasury::Models::ExpectedPayment, ModernTreasury::Models::LedgerTransaction, ModernTreasury::Models::Transaction, ModernTreasury::Models::BulkResult::Entity::BulkError]
      required :entity, union: -> { ModernTreasury::BulkResult::Entity }

      # @!attribute entity_id
      #   Unique identifier for the result entity object.
      #
      #   @return [String]
      required :entity_id, String

      # @!attribute entity_type
      #   The type of the result entity object. For a successful bulk result, this is the
      #   same as the `resource_type` of the bulk request. For a failed bulk result, this
      #   is always bulk_error
      #
      #   @return [Symbol, ModernTreasury::Models::BulkResult::EntityType]
      required :entity_type, enum: -> { ModernTreasury::BulkResult::EntityType }

      # @!attribute live_mode
      #   This field will be true if this object exists in the live environment or false
      #   if it exists in the test environment.
      #
      #   @return [Boolean]
      required :live_mode, ModernTreasury::Internal::Type::Boolean

      # @!attribute object
      #
      #   @return [String]
      required :object, String

      # @!attribute request_id
      #   Unique identifier for the request that created this bulk result. This is the ID
      #   of the bulk request when `request_type` is bulk_request
      #
      #   @return [String]
      required :request_id, String

      # @!attribute request_params
      #   An optional object that contains the provided input params for the request that
      #   created this result. This is an item in the `resources` array for the
      #   bulk_request
      #
      #   @return [Hash{Symbol=>String}, nil]
      required :request_params, ModernTreasury::Internal::Type::HashOf[String], nil?: true

      # @!attribute request_type
      #   The type of the request that created this result. bulk_request is the only
      #   supported `request_type`
      #
      #   @return [Symbol, ModernTreasury::Models::BulkResult::RequestType]
      required :request_type, enum: -> { ModernTreasury::BulkResult::RequestType }

      # @!attribute status
      #   One of successful or failed.
      #
      #   @return [Symbol, ModernTreasury::Models::BulkResult::Status]
      required :status, enum: -> { ModernTreasury::BulkResult::Status }

      # @!attribute updated_at
      #
      #   @return [Time]
      required :updated_at, Time

      # @!method initialize(id:, created_at:, entity:, entity_id:, entity_type:, live_mode:, object:, request_id:, request_params:, request_type:, status:, updated_at:)
      #   Some parameter documentations has been truncated, see
      #   {ModernTreasury::Models::BulkResult} for more details.
      #
      #   @param id [String]
      #
      #   @param created_at [Time]
      #
      #   @param entity [ModernTreasury::Models::PaymentOrder, ModernTreasury::Models::ExpectedPayment, ModernTreasury::Models::LedgerTransaction, ModernTreasury::Models::Transaction, ModernTreasury::Models::BulkResult::Entity::BulkError] An object with type as indicated by `entity_type`. This is the result object tha
      #
      #   @param entity_id [String] Unique identifier for the result entity object.
      #
      #   @param entity_type [Symbol, ModernTreasury::Models::BulkResult::EntityType] The type of the result entity object. For a successful bulk result, this is the
      #
      #   @param live_mode [Boolean] This field will be true if this object exists in the live environment or false i
      #
      #   @param object [String]
      #
      #   @param request_id [String] Unique identifier for the request that created this bulk result. This is the ID
      #
      #   @param request_params [Hash{Symbol=>String}, nil] An optional object that contains the provided input params for the request that
      #
      #   @param request_type [Symbol, ModernTreasury::Models::BulkResult::RequestType] The type of the request that created this result. bulk_request is the only suppo
      #
      #   @param status [Symbol, ModernTreasury::Models::BulkResult::Status] One of successful or failed.
      #
      #   @param updated_at [Time]

      # An object with type as indicated by `entity_type`. This is the result object
      # that is generated by performing the requested action on the provided input
      # `request_params`.
      #
      # @see ModernTreasury::Models::BulkResult#entity
      module Entity
        extend ModernTreasury::Internal::Type::Union

        variant -> { ModernTreasury::PaymentOrder }

        variant -> { ModernTreasury::ExpectedPayment }

        variant -> { ModernTreasury::LedgerTransaction }

        variant -> { ModernTreasury::Transaction }

        variant -> { ModernTreasury::BulkResult::Entity::BulkError }

        class BulkError < ModernTreasury::Internal::Type::BaseModel
          # @!attribute id
          #
          #   @return [String]
          required :id, String

          # @!attribute created_at
          #
          #   @return [Time]
          required :created_at, Time

          # @!attribute live_mode
          #   This field will be true if this object exists in the live environment or false
          #   if it exists in the test environment.
          #
          #   @return [Boolean]
          required :live_mode, ModernTreasury::Internal::Type::Boolean

          # @!attribute object
          #
          #   @return [String]
          required :object, String

          # @!attribute request_errors
          #
          #   @return [Array<ModernTreasury::Models::BulkResult::Entity::BulkError::RequestError>]
          required :request_errors,
                   -> {
                     ModernTreasury::Internal::Type::ArrayOf[ModernTreasury::BulkResult::Entity::BulkError::RequestError]
                   }

          # @!attribute updated_at
          #
          #   @return [Time]
          required :updated_at, Time

          # @!method initialize(id:, created_at:, live_mode:, object:, request_errors:, updated_at:)
          #   Some parameter documentations has been truncated, see
          #   {ModernTreasury::Models::BulkResult::Entity::BulkError} for more details.
          #
          #   @param id [String]
          #
          #   @param created_at [Time]
          #
          #   @param live_mode [Boolean] This field will be true if this object exists in the live environment or false i
          #
          #   @param object [String]
          #
          #   @param request_errors [Array<ModernTreasury::Models::BulkResult::Entity::BulkError::RequestError>]
          #
          #   @param updated_at [Time]

          class RequestError < ModernTreasury::Internal::Type::BaseModel
            # @!attribute code
            #
            #   @return [String, nil]
            optional :code, String

            # @!attribute message
            #
            #   @return [String, nil]
            optional :message, String

            # @!attribute parameter
            #
            #   @return [String, nil]
            optional :parameter, String

            # @!method initialize(code: nil, message: nil, parameter: nil)
            #   @param code [String]
            #   @param message [String]
            #   @param parameter [String]
          end
        end

        # @!method self.variants
        #   @return [Array(ModernTreasury::Models::PaymentOrder, ModernTreasury::Models::ExpectedPayment, ModernTreasury::Models::LedgerTransaction, ModernTreasury::Models::Transaction, ModernTreasury::Models::BulkResult::Entity::BulkError)]
      end

      # The type of the result entity object. For a successful bulk result, this is the
      # same as the `resource_type` of the bulk request. For a failed bulk result, this
      # is always bulk_error
      #
      # @see ModernTreasury::Models::BulkResult#entity_type
      module EntityType
        extend ModernTreasury::Internal::Type::Enum

        PAYMENT_ORDER = :payment_order
        LEDGER_ACCOUNT = :ledger_account
        LEDGER_TRANSACTION = :ledger_transaction
        EXPECTED_PAYMENT = :expected_payment
        TRANSACTION = :transaction
        ENTITY_LINK = :entity_link
        BULK_ERROR = :bulk_error

        # @!method self.values
        #   @return [Array<Symbol>]
      end

      # The type of the request that created this result. bulk_request is the only
      # supported `request_type`
      #
      # @see ModernTreasury::Models::BulkResult#request_type
      module RequestType
        extend ModernTreasury::Internal::Type::Enum

        BULK_REQUEST = :bulk_request

        # @!method self.values
        #   @return [Array<Symbol>]
      end

      # One of successful or failed.
      #
      # @see ModernTreasury::Models::BulkResult#status
      module Status
        extend ModernTreasury::Internal::Type::Enum

        PENDING = :pending
        SUCCESSFUL = :successful
        FAILED = :failed

        # @!method self.values
        #   @return [Array<Symbol>]
      end
    end
  end
end
