# frozen_string_literal: true

module ModernTreasury
  module Models
    # @example
    # ```ruby
    # bulk_result => {
    #   id: String,
    #   created_at: Time,
    #   entity: union: ModernTreasury::Models::BulkResult::Entity,
    #   entity_id: String,
    #   entity_type: enum: ModernTreasury::Models::BulkResult::EntityType,
    #   **_
    # }
    # ```
    class BulkResult < ModernTreasury::BaseModel
      # @!attribute id
      #
      #   @return [String]
      required :id, String

      # @!attribute created_at
      #
      #   @return [Time]
      required :created_at, Time

      # @!attribute entity
      #   An object with type as indicated by `entity_type`. This is the result object that is generated by performing the requested action on the provided input `request_params`.
      #
      #   @return [ModernTreasury::Models::PaymentOrder, ModernTreasury::Models::ExpectedPayment, ModernTreasury::Models::LedgerTransaction, ModernTreasury::Models::Transaction, ModernTreasury::Models::BulkResult::Entity::BulkError]
      required :entity, union: -> { ModernTreasury::Models::BulkResult::Entity }

      # @!attribute entity_id
      #   Unique identifier for the result entity object.
      #
      #   @return [String]
      required :entity_id, String

      # @!attribute entity_type
      #   The type of the result entity object. For a successful bulk result, this is the same as the `resource_type` of the bulk request. For a failed bulk result, this is always bulk_error
      #
      #   @return [Symbol, ModernTreasury::Models::BulkResult::EntityType]
      required :entity_type, enum: -> { ModernTreasury::Models::BulkResult::EntityType }

      # @!attribute live_mode
      #   This field will be true if this object exists in the live environment or false if it exists in the test environment.
      #
      #   @return [Boolean]
      required :live_mode, ModernTreasury::BooleanModel

      # @!attribute object
      #
      #   @return [String]
      required :object, String

      # @!attribute request_id
      #   Unique identifier for the request that created this bulk result. This is the ID of the bulk request when `request_type` is bulk_request
      #
      #   @return [String]
      required :request_id, String

      # @!attribute request_params
      #   An optional object that contains the provided input params for the request that created this result. This is an item in the `resources` array for the bulk_request
      #
      #   @return [Hash{Symbol=>String}, nil]
      required :request_params, ModernTreasury::HashOf[String]

      # @!attribute request_type
      #   The type of the request that created this result. bulk_request is the only supported `request_type`
      #
      #   @return [Symbol, ModernTreasury::Models::BulkResult::RequestType]
      required :request_type, enum: -> { ModernTreasury::Models::BulkResult::RequestType }

      # @!attribute status
      #   One of successful or failed.
      #
      #   @return [Symbol, ModernTreasury::Models::BulkResult::Status]
      required :status, enum: -> { ModernTreasury::Models::BulkResult::Status }

      # @!attribute updated_at
      #
      #   @return [Time]
      required :updated_at, Time

      # @!parse
      #   # @param id [String]
      #   #
      #   # @param created_at [String]
      #   #
      #   # @param entity [ModernTreasury::Models::PaymentOrder, ModernTreasury::Models::ExpectedPayment, ModernTreasury::Models::LedgerTransaction, ModernTreasury::Models::Transaction, ModernTreasury::Models::BulkResult::Entity::BulkError] An object with type as indicated by `entity_type`. This is the result object
      #   #   that is generated by performing the requested action on the provided input
      #   #   `request_params`.
      #   #
      #   # @param entity_id [String] Unique identifier for the result entity object.
      #   #
      #   # @param entity_type [String] The type of the result entity object. For a successful bulk result, this is the
      #   #   same as the `resource_type` of the bulk request. For a failed bulk result, this
      #   #   is always bulk_error
      #   #
      #   # @param live_mode [Boolean] This field will be true if this object exists in the live environment or false
      #   #   if it exists in the test environment.
      #   #
      #   # @param object [String]
      #   #
      #   # @param request_id [String] Unique identifier for the request that created this bulk result. This is the ID
      #   #   of the bulk request when `request_type` is bulk_request
      #   #
      #   # @param request_params [Hash{Symbol=>String}, nil] An optional object that contains the provided input params for the request that
      #   #   created this result. This is an item in the `resources` array for the
      #   #   bulk_request
      #   #
      #   # @param request_type [String] The type of the request that created this result. bulk_request is the only
      #   #   supported `request_type`
      #   #
      #   # @param status [String] One of successful or failed.
      #   #
      #   # @param updated_at [String]
      #   #
      #   def initialize(
      #     id:,
      #     created_at:,
      #     entity:,
      #     entity_id:,
      #     entity_type:,
      #     live_mode:,
      #     object:,
      #     request_id:,
      #     request_params:,
      #     request_type:,
      #     status:,
      #     updated_at:,
      #     **
      #   )
      #     super
      #   end

      # def initialize: (Hash | ModernTreasury::BaseModel) -> void

      # An object with type as indicated by `entity_type`. This is the result object that is generated by performing the requested action on the provided input `request_params`.
      #
      # @example
      # ```ruby
      # case entity
      # in ModernTreasury::Models::PaymentOrder
      #   # ...
      # in ModernTreasury::Models::ExpectedPayment
      #   # ...
      # in ModernTreasury::Models::LedgerTransaction
      #   # ...
      # in ModernTreasury::Models::Transaction
      #   # ...
      # in ModernTreasury::Models::BulkResult::Entity::BulkError
      #   # ...
      # end
      # ```
      class Entity < ModernTreasury::Union
        variant -> { ModernTreasury::Models::PaymentOrder }

        variant -> { ModernTreasury::Models::ExpectedPayment }

        variant -> { ModernTreasury::Models::LedgerTransaction }

        variant -> { ModernTreasury::Models::Transaction }

        variant -> { ModernTreasury::Models::BulkResult::Entity::BulkError }

        # @example
        # ```ruby
        # bulk_error => {
        #   id: String,
        #   created_at: Time,
        #   live_mode: ModernTreasury::BooleanModel,
        #   object: String,
        #   request_errors: -> { ModernTreasury::ArrayOf[ModernTreasury::Models::BulkResult::Entity::BulkError::RequestError] === _1 }
        # }
        # ```
        class BulkError < ModernTreasury::BaseModel
          # @!attribute id
          #
          #   @return [String]
          required :id, String

          # @!attribute created_at
          #
          #   @return [Time]
          required :created_at, Time

          # @!attribute live_mode
          #   This field will be true if this object exists in the live environment or false if it exists in the test environment.
          #
          #   @return [Boolean]
          required :live_mode, ModernTreasury::BooleanModel

          # @!attribute object
          #
          #   @return [String]
          required :object, String

          # @!attribute request_errors
          #
          #   @return [Array<ModernTreasury::Models::BulkResult::Entity::BulkError::RequestError>]
          required :request_errors,
                   -> {
                     ModernTreasury::ArrayOf[ModernTreasury::Models::BulkResult::Entity::BulkError::RequestError]
                   }

          # @!attribute updated_at
          #
          #   @return [Time]
          required :updated_at, Time

          # @!parse
          #   # @param id [String]
          #   #
          #   # @param created_at [String]
          #   #
          #   # @param live_mode [Boolean] This field will be true if this object exists in the live environment or false
          #   #   if it exists in the test environment.
          #   #
          #   # @param object [String]
          #   #
          #   # @param request_errors [Array<ModernTreasury::Models::BulkResult::Entity::BulkError::RequestError>]
          #   #
          #   # @param updated_at [String]
          #   #
          #   def initialize(id:, created_at:, live_mode:, object:, request_errors:, updated_at:, **) = super

          # def initialize: (Hash | ModernTreasury::BaseModel) -> void

          # @example
          # ```ruby
          # request_error => {
          #   code: String,
          #   message: String,
          #   parameter: String
          # }
          # ```
          class RequestError < ModernTreasury::BaseModel
            # @!attribute code
            #
            #   @return [String]
            optional :code, String

            # @!attribute message
            #
            #   @return [String]
            optional :message, String

            # @!attribute parameter
            #
            #   @return [String]
            optional :parameter, String

            # @!parse
            #   # @param code [String]
            #   # @param message [String]
            #   # @param parameter [String]
            #   #
            #   def initialize(code: nil, message: nil, parameter: nil, **) = super

            # def initialize: (Hash | ModernTreasury::BaseModel) -> void
          end
        end
      end

      # The type of the result entity object. For a successful bulk result, this is the same as the `resource_type` of the bulk request. For a failed bulk result, this is always bulk_error
      #
      # @example
      # ```ruby
      # case entity_type
      # in :payment_order
      #   # ...
      # in :ledger_transaction
      #   # ...
      # in :transaction
      #   # ...
      # in :expected_payment
      #   # ...
      # in :bulk_error
      #   # ...
      # end
      # ```
      class EntityType < ModernTreasury::Enum
        PAYMENT_ORDER = :payment_order
        LEDGER_TRANSACTION = :ledger_transaction
        TRANSACTION = :transaction
        EXPECTED_PAYMENT = :expected_payment
        BULK_ERROR = :bulk_error

        finalize!
      end

      # The type of the request that created this result. bulk_request is the only supported `request_type`
      #
      # @example
      # ```ruby
      # case request_type
      # in :bulk_request
      #   # ...
      # end
      # ```
      class RequestType < ModernTreasury::Enum
        BULK_REQUEST = :bulk_request

        finalize!
      end

      # One of successful or failed.
      #
      # @example
      # ```ruby
      # case status
      # in :pending
      #   # ...
      # in :successful
      #   # ...
      # in :failed
      #   # ...
      # end
      # ```
      class Status < ModernTreasury::Enum
        PENDING = :pending
        SUCCESSFUL = :successful
        FAILED = :failed

        finalize!
      end
    end
  end
end
